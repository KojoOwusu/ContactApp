(this["webpackJsonpcontactapp-frontend"]=this["webpackJsonpcontactapp-frontend"]||[]).push([[0],{145:function(t,e,n){t.exports=n.p+"static/media/phone.0cd1fbd3.svg"},146:function(t,e,n){t.exports=n.p+"static/media/twitter.34ef862a.svg"},147:function(t,e,n){t.exports=n.p+"static/media/email.4ac4470c.svg"},151:function(t,e,n){t.exports=n(209)},156:function(t,e,n){},157:function(t,e,n){},184:function(t,e,n){},203:function(t,e,n){},204:function(t,e,n){},205:function(t,e,n){},207:function(t,e,n){},209:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(16),o=n.n(c),i=(n(156),n(15)),l=n(43),m=n(50),u=n(104),s=n(215),p=n(102),d=n(211),f=n(213),E=n(216),v=n(61),b=n.n(v),h=n(214),g=n(212),C=(n(157),function(t){var e=t.placeholder,n=t.type,a=t.icon,c=void 0!==a&&a,o=t.value,i=t.remove,l=void 0===i?function(){}:i,m=t.id,u=void 0===m?0:m,s=t.onChange;return r.a.createElement("div",{className:"contact-input"},r.a.createElement("p",null,e),c?r.a.createElement(f.a,{align:"middle",justify:"center",gutter:16},r.a.createElement(E.a,{span:22},r.a.createElement(g.a,{placeholder:e,value:o,type:n,onChange:function(t){return s(t.target.value)}})),r.a.createElement(E.a,{span:2},r.a.createElement(h.a,{onClick:function(){return l(u||1)},style:{fontSize:"1.2rem"}}))):r.a.createElement(g.a,{value:o,placeholder:e,type:n,onChange:function(t){return s(t.target.value)}}))}),j=(n(184),n(14)),O=function(t){var e=t.lastIndexOf(":"),n=t.slice(++e,t.length);return parseInt(n,10)};function y(){var t=Object(m.a)(["\n\t\tquery($id: ID!) {\n\t\t\tcontact(id: $id) {\n\t\t\t\tfirstname\n\t\t\t\tlastname\n\t\t\t\tphonenumbers {\n\t\t\t\t\tphonenumber\n\t\t\t\t\tpurpose\n\t\t\t\t}\n\t\t\t\temails {\n\t\t\t\t\temail\n\t\t\t\t\tpurpose\n\t\t\t\t}\n\t\t\t\ttwitterusername\n\t\t\t}\n\t\t}\n\t"]);return y=function(){return t},t}function N(){var t=Object(m.a)(["\n\tmutation(\n\t\t$id: ID!\n\t\t$firstname: String!\n\t\t$lastname: String!\n\t\t$phonenumbers: [PhoneNumberInput!]!\n\t\t$emails: [EmailInput!]!\n\t\t$twitterusername: String\n\t) {\n\t\teditContact(\n\t\t\tinput: {\n\t\t\t\tid: $id\n\t\t\t\tfirstname: $firstname\n\t\t\t\tlastname: $lastname\n\t\t\t\tphonenumbers: $phonenumbers\n\t\t\t\temails: $emails\n\t\t\t\ttwitterusername: $twitterusername\n\t\t\t}\n\t\t) {\n\t\t\tcontact {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t}\n"]);return N=function(){return t},t}function w(){var t=Object(m.a)(["\n\tmutation(\n\t\t$firstname: String!\n\t\t$lastname: String!\n\t\t$phonenumbers: [PhoneNumberInput!]!\n\t\t$emails: [EmailInput!]!\n\t\t$twitterusername: String\n\t) {\n\t\tcreateContact(\n\t\t\tinput: {\n\t\t\t\tfirstname: $firstname\n\t\t\t\tlastname: $lastname\n\t\t\t\tphonenumbers: $phonenumbers\n\t\t\t\temails: $emails\n\t\t\t\ttwitterusername: $twitterusername\n\t\t\t}\n\t\t) {\n\t\t\tcontact {\n\t\t\t\tid\n\t\t\t}\n\t\t}\n\t}\n"]);return w=function(){return t},t}var $=function(t){var e=t.onChange,n=t.value,a=function(t,a){e(n.map((function(e,n){return n===t?{phonenumber:a,purpose:e.purpose}:e})))};return r.a.createElement("div",{style:{margin:0}},n.map((function(t,c){return r.a.createElement(C,{remove:function(){return t=c,void e(n.filter((function(e,n){return n!==t})));var t},onChange:function(t){a(c,t)},key:c,value:t.phonenumber,id:c,icon:!0,placeholder:"Phone",type:"text"})})),r.a.createElement(p.a,{style:{marginTop:"0.5rem"},icon:r.a.createElement(s.a,null),type:"primary",onClick:function(){e([].concat(Object(u.a)(n),[{phonenumber:"",purpose:"work"}]))}},"Add Phone"))},S=function(t){var e=t.onChange,n=t.value,a=function(t,a){e(n.map((function(e,n){return n===t?{email:a,purpose:e.purpose}:e})))};return r.a.createElement("div",{style:{margin:"0"}},n.map((function(t,c){return r.a.createElement(C,{remove:function(){return t=c,void e(n.filter((function(e,n){return n!==t})));var t},onChange:function(t){a(c,t)},value:t.email,id:c,key:c,icon:!0,placeholder:"Email",type:"text"})})),r.a.createElement(p.a,{style:{marginTop:"0.5rem"},icon:r.a.createElement(s.a,null),type:"primary",onClick:function(){e([].concat(Object(u.a)(n),[{email:"",purpose:""}]))}},"Add Email"))},k=Object(j.gql)(w()),x=Object(j.gql)(N()),I=function(t){var e=t.Name,n=Object(i.f)(),c=Object(i.g)().pathname,o=Object(j.gql)(y()),m=Object(a.useState)(""),u=Object(l.a)(m,2),s=u[0],v=u[1],h=Object(a.useState)(""),g=Object(l.a)(h,2),N=g[0],w=g[1],I=Object(a.useState)(""),q=Object(l.a)(I,2),A=q[0],F=q[1],D=Object(a.useState)([{email:"",purpose:""}]),M=Object(l.a)(D,2),T=M[0],P=M[1],B=Object(a.useState)([{phonenumber:"",purpose:"work"}]),H=Object(l.a)(B,2),Q=H[0],z=H[1],L=Object(j.useMutation)(k,{onCompleted:function(t){n.push("/contactDetails:".concat(t.createContact.contact.id))},onError:function(t){},refetchQueries:["Contacts"]}),W=Object(l.a)(L,2),_=W[0],J=(W[1],Object(j.useMutation)(x,{onCompleted:function(t){n.push("/contactDetails:".concat(t.editContact.contact.id))},onError:function(t){},refetchQueries:["Contacts"]})),U=Object(l.a)(J,2),G=U[0],K=(U[1],Object(j.useLazyQuery)(o,{onCompleted:function(t){v(t.contact.firstname),w(t.contact.lastname),z(t.contact.phonenumbers),P(t.contact.emails),F(t.contact.twitterusername)},onError:function(t){}})),R=Object(l.a)(K,2),V=R[0];R[1];return Object(a.useEffect)((function(){return O(c)&&V({variables:{id:O(c)}}),function(){}}),[]),r.a.createElement("form",{className:"contact-details"},r.a.createElement("div",{style:{fontSize:"1.2rem",fontFamily:"Segoe UI",fontWeight:"bold",marginTop:"2rem",color:" rgba(48, 54, 141, 0.8)"}},e),r.a.createElement("div",{className:"image-wrapper"},r.a.createElement(d.a,{className:"Image",src:b.a})),r.a.createElement("div",{className:"input-wrapper"},r.a.createElement(f.a,{gutter:[16,16]},r.a.createElement(E.a,{span:12},r.a.createElement(C,{value:s,type:"text",placeholder:"Firstname",onChange:v})),r.a.createElement(E.a,{span:12},r.a.createElement(C,{type:"text",value:N,placeholder:"Lastname",onChange:w}))),r.a.createElement($,{onChange:z,value:Q}),r.a.createElement(S,{onChange:P,value:T}),r.a.createElement("div",{style:{margin:"1rem 0"}},r.a.createElement(C,{placeholder:"Twitter",value:A,type:"text",onChange:F}))),r.a.createElement(p.a,{className:"SaveButton",type:"primary",disabled:!(s&&N&&Q),onClick:function(){O(c)?G({variables:{id:O(c),firstname:s,lastname:N,phonenumbers:Q,emails:T,twitterusername:A}}):_({variables:{firstname:s,lastname:N,phonenumbers:Q,emails:T,twitterusername:A}})}},"Save"))},q=(n(203),n(39)),A=(n(204),function(t){t.contact_id;var e=t.firstname;return r.a.createElement("div",{className:"ContactItem"},r.a.createElement("img",{src:b.a}),r.a.createElement("div",null,e))});function F(){var t=Object(m.a)(["\n\tquery Contacts {\n\t\tcontacts {\n\t\t\tid\n\t\t\tfirstname\n\t\t}\n\t}\n"]);return F=function(){return t},t}var D=Object(j.gql)(F()),M=function(){return r.a.createElement("div",null,r.a.createElement(q.b,{to:"/addContact"},r.a.createElement(p.a,{className:"AddButton",type:"primary",shape:"circle",icon:r.a.createElement(s.a,null),size:"large"})))},T=function(){var t=Object(j.useQuery)(D),e=t.loading,n=t.error,c=t.data;return e?r.a.createElement("p",null,"loading"):(n&&console.log("Error: ".concat(n.message)),r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:"AppHeader"},r.a.createElement("div",null,"Contacts"),r.a.createElement(M,null)),r.a.createElement("div",{className:"ContactList"},c&&c.contacts.map((function(t){return console.log(t),e=t,r.a.createElement(q.b,{to:"/contactDetails:".concat(e.id)},r.a.createElement("li",null,r.a.createElement(A,{contact_id:e.id,firstname:e.firstname})));var e})))))},P=(n(205),n(145)),B=n.n(P),H=n(146),Q=n.n(H),z=(n(206),n(147)),L=n.n(z);function W(){var t=Object(m.a)(["\n\t\tmutation($userid: ID!) {\n\t\t\tdeleteContact(input: { id: $userid }) {\n\t\t\t\tcontacts {\n\t\t\t\t\tfirstname\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t"]);return W=function(){return t},t}function _(){var t=Object(m.a)(["\n\tquery{\n\t\tcontact(id:","){\n\t\t  firstname\n\t\t  lastname\n\t\t  phonenumbers{\n\t\t\tphonenumber\n\t\t\tpurpose\n\t\t  }\n\t\t  emails{\n\t\t\temail\n\t\t\tpurpose\n\t\t  }\n\t\t  twitterusername\n\t\t}\n\t  }\n\t"]);return _=function(){return t},t}var J=function(t){var e=Object(i.g)().pathname,n=Object(i.f)(),a=Object(j.gql)(_(),O(e)),c=Object(j.gql)(W()),o=Object(j.useQuery)(a),m=Object(j.useMutation)(c,{onCompleted:function(t){n.push("/")},onError:function(t){},refetchQueries:["Contacts"]}),u=Object(l.a)(m,2),s=u[0];return u[1].loading||o.loading?r.a.createElement("p",null):(o.error&&console.log("Error: ".concat(o.error.message)),r.a.createElement("div",{className:"MainContainer"},r.a.createElement("div",{className:"HeaderArea"},r.a.createElement("img",{src:b.a}),r.a.createElement("span",{className:"ContactName"},"".concat(o.data.contact.firstname," ").concat(o.data.contact.lastname)),r.a.createElement(q.b,{to:"/editContact:".concat(O(e))},r.a.createElement(p.a,{type:"link",size:"large",className:"editButton"}," ","Edit"," "))),r.a.createElement("div",{className:"FieldContainer"},r.a.createElement("div",{className:"iconTextHeader"},r.a.createElement("img",{src:B.a}),"phonenumber"),o.data.contact.phonenumbers.map((function(t){return e=t,r.a.createElement("div",{className:"ContactInfoField"},r.a.createElement("div",null,e.phonenumber),r.a.createElement("div",null,e.purpose));var e}))),r.a.createElement("div",{className:"FieldContainer"},r.a.createElement("div",{className:"iconTextHeader"},r.a.createElement("img",{src:L.a}),"email"),o.data.contact.emails.map((function(t){return e=t,r.a.createElement("div",{className:"ContactInfoField"},r.a.createElement("div",null,e.email),r.a.createElement("div",null,e.purpose));var e}))),r.a.createElement("div",{className:"FieldContainer"},r.a.createElement("div",{className:"iconTextHeader"},r.a.createElement("img",{src:Q.a}),"twitter"),r.a.createElement("div",{className:"ContactInfoField"},o.data.contact.twitterusername)),r.a.createElement(p.a,{className:"deleteButton",type:"primary",danger:!0,onClick:function(){s({variables:{userid:O(e)}})}},"DELETE")))},U=(n(207),function(){return r.a.createElement("div",{className:"NoContact"},"No Contact Selected")}),G=function(){return r.a.createElement("div",{className:"MainWrapper"},r.a.createElement("div",{className:"MainAppWindow"},r.a.createElement("div",{className:"ContactsPane"},r.a.createElement(T,null)),r.a.createElement("div",{className:"SidePane"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/",exact:!0,component:U}),r.a.createElement(i.a,{path:"/contactDetails:contact_id",component:J}),r.a.createElement(i.a,{exact:!0,path:"/addContact"},r.a.createElement(I,{Name:"Add Contact"})),r.a.createElement(i.a,{exact:!0,path:"/editContact:id"},r.a.createElement(I,{Name:"Edit Contact"}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=Object(j.createHttpLink)({uri:"https://safe-earth-99320.herokuapp.com/graphql"}),R=new j.ApolloClient({link:K,cache:new j.InMemoryCache,name:"contactapp-web-client"});o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j.ApolloProvider,{client:R},r.a.createElement(q.a,null,r.a.createElement(G,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},61:function(t,e,n){t.exports=n.p+"static/media/user.68f2a6aa.svg"}},[[151,1,2]]]);
//# sourceMappingURL=main.8bef27ef.chunk.js.map